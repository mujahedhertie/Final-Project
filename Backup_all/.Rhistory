<<<<<<< HEAD
rm(load, loaded)
figcap <- captioner(prefix = "Figure",
auto_space = TRUE, levels = 1, type = NULL)
tablecap <- captioner(prefix = "Table",
auto_space = TRUE, levels = 1, type = NULL)
# Set the working directory:
# Create list of commonly used working directories (update, if needed)
possible_dir <- c('C:/Users/Johannes SK/Dropbox/Studium/Spring2016/CollaborativeResearch/Final-Project',
'C:/Users/User/Documents/GitHub/Final-Project')
set_valid_wd(possible_dir) # Set to first valid directory in the possible_dir vector
rm(possible_dir) # remove possible_dir vector
```
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
```
View(Data)
write.csv(Data, file = "afd.csv")
write.dta(Data, file = "afd.dta")
write.
## Introduction
- Within less than three years of being founded, the **Alternative for Germany** (AfD) has achieved extraordinary vote share in the General election of 2013 and the European Parliament election of 2014 [@arzheimer2015afd]
- March 2016: **15.1%** in Baden-Württemberg, **12.6%** in Rhineland-Palatinate, **24.3%** in Saxony-Anhalt
- "**a landslide**"[@Zeit2016]
- The AfD has **"arrived in German mainstream politics"** [@Spiegel2016]
## Existing Research
- AfD can be described as a "**functional equivalent for a right-wing populist party** in a country where right-wing politics are strongly stigmatised" [@Berbuir2015]
- Successful right-wing populist parties almost always use **anti-immigration rhethorics** [@Ivarsflaten2008]
- **Volume of refugees**, level of **immigration**, domestic **tax burden**, and strong presence of **left-wing parties** positively influences right wing-populist electoral success [@swank2003globalization]
- AfD was especially successful in mobilizing former **non-voters** and the **unemployed** [@Spiegel2016]
## Research Question
*"What explains the recent electoral success of the AfD in the different districts of Baden-Württemberg, Rhineland-Palatinate, and Saxony-Anhalt?"*
- What structural factors correlate with the success?
- Are those the same characteristics found for other western European countries?
## Election Data
*Source: State Statistical Offices of @BWStateOffice, @RPStateOffice, and @SAStateOffice*
Variable | Name in dataset | Description |
--------------------|-----------------|-------------------------------|
Dependent Variable (DV) | **vote.AfD** | The vote share of the Alternative for Germany in the current state election |
Independent Variable 1 (IV1) | **lag.turnout** | Overall voter turnout of the previous state election                        |
IV2, IV3, IV4, IV5, IV6 | **lag.CDU**, **lag.Greens**, **lag.SPD**, **lag.FDP**, **lag.Linke** | The vote share of political parties in the previous state election (CDU, SPD, Greens, FDP, and Linke) |
## Structural Data
*Source: Federal Statistical Office [@DESTATIS]*
Variable | Name in dataset | Description |
--------------------|-----------------|-------------------------------|
IV7 | **abitur.ratio**| Ratio of school leavers per district with general qualification for university entrance (Abitur) |
IV8 | **nodegree.ratio** | Ratio of school leavers per district with no school degree |
IV9 | **GDP.capita** | Gross domestic product (GDP) per capita / 1000 |
IV10 | **unemp.rate** | Unemployment rate in the district |
IV11 | **n.refugees** | Number of asylum seekers per district |
## Descriptive Statistics
```{r sumstat, echo=F, warning=F, message=F, error=F, results='asis'}
summary_labels <- c('Vote share of AfD in 2016', 'Vote turnout in 2011',
'Vote share of CDU in 2011', 'Vote share of Greens in 2011',
'Vote share of SPD in 2011', 'Vote share of FDP in 2011',
'Vote share of Linke in 2011', 'High school ratio',
'No degree ratio', 'GDP per capita / 1000',
'Unemployment rate', 'Number of refugees')
stargazer(Data[4:16],
covariate.labels = summary_labels,
font.size = 'tiny',
title= 'Summary statistics of the covariates',
type="latex", header = FALSE)
```
## Correlation Matrix
```{r corr, echo=F, warning=F, message=F, error=F, results='asis'}
correlation.matrix <- cor(Data[, c("vote.AfD","lag.CDU",
"lag.SPD","GDP.capita",
"unempl.rate",
"abitur.ratio")])
stargazer(correlation.matrix,
title= 'Correlation matrix of some variables',
font.size = 'tiny',
digits = 2,
type="latex",
header = FALSE,
no.space = FALSE)
```
## Distribution of AfD Vote Share
```{r bar, echo=F, warning=F, message=F, error=F, results='hide', fig.width=13}
ggplot(Data) +
geom_bar(aes(y = vote.AfD,
x = reorder(district.name, -vote.AfD),
fill = state),
=======
cat()
}
mean(USArrests$murder, na.rm = TRUE)
mean(USArrests$assault, na.rm = TRUE)
mean(USArrests$urbanpop, na.rm = TRUE)
mean(USArrests$rape, na.rm = TRUE)
median(USArrests$murder, na.rm = TRUE)
median(USArrests$assault, na.rm = TRUE)
median(USArrests$urbanpop, na.rm = TRUE)
median(USArrests$rape, na.rm = TRUE)
range(USArrests$murder)
range(USArrests$assault)
range(USArrests$urbanpop)
range(USArrests$rape)
summary(USArrests$murder, assault, urbanpop, rape)
summary(USArrests)
summary(USArrests)
ggplot(USArrests) +
geom_bar(aes(y = murder, x = reorder(states, -murder)),
>>>>>>> origin/master
stat = "identity") +
ylab("AfD vote share (in %)") +
xlab("Districts of Baden-Württemberg, Rhineland-Palatinate, and Saxony Anhalt") +
theme_bw() +
theme(axis.text.x = element_text(angle = 90))
```
## The Correlation of GDP per Capita and AfD Vote Share
``` {r fig1, echo = F, message = F, results = "hide", error=F, fig.height=4}
ggplot2::ggplot(Data, aes(log(x = GDP.capita), vote.AfD)) +
xlab("GDP per capita per district / 1000 (log)") +
ylab("AfD vote share (in %)") +
geom_point(aes(colour = state)) +
geom_smooth() +
theme_bw()
```
## The Correlation of Unemployment and AfD Vote Share
``` {r fig2, echo = F, message = F, results = "hide", error=F, fig.height=4}
ggplot2::ggplot(Data, aes(log(x = unempl.rate), vote.AfD, colour = state)) +
xlab("Unemployment rate per district (log)") +
ylab("AfD vote share (in %)") +
geom_point(aes(colour = state)) +
geom_smooth() +
theme_bw()
```
## The Correlation of Number of Refugees and AfD Vote Share
``` {r fig3, echo = F, message = F, results = "hide", error=F, fig.height=4}
ggplot2::ggplot(Data,aes(log(x = n.refugees), vote.AfD)) +
xlab("Number of refugees per district (log)") +
ylab("AfD vote share (in %)") +
geom_point(aes(colour = state)) +
geom_smooth() +
theme_light()
```
## Inferential Statistics: normal multivariate regression analsys
``` {r regout, echo = F, message = F, results = "asis", error=F}
reg1 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees, data = Data)
reg2 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees + lag.CDU +
lag.SPD + lag.turnout, data = Data)
reg3 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees +
abitur.ratio + nodegree.ratio, data = Data)
reg4 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees
+ lag.CDU + lag.SPD + lag.turnout + abitur.ratio +
nodegree.ratio, data = Data)
reg5 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees
+ lag.CDU + lag.SPD + lag.turnout + abitur.ratio +
nodegree.ratio + state, data = Data)
var_labels <- c('GDP per capita / 1000', 'Unemployment rate', 'Number of refugees',
'Vote share of CDU in 2011 election',
'Vote share of SPD in 2011 election',
'Voter turnout in 2011 election',
'Abitur ratio', 'No degree ratio', 'state')
stargazer::stargazer(reg1, reg2, reg3, reg4, reg5,
omit = 'as.factor*',
omit.stat = c('f', 'ser'), # to nicely fits on the page
out.header = F,
title = 'Determinants of electoral success for the Alternative for Germany',
dep.var.labels = 'Vote share of AfD',
covariate.labels = var_labels,
label = 'AfD_voteshare',
add.lines = list(c('District FE', rep('NO', 5))),
font.size = 'tiny', # make the font tiny
float = F, df = F, # add float and df to F
type="latex", header = F,
no.space = T,
digits = 2) # add no.space=TRUE to remove space in betwen line.
```
``` {r betareganalysis, echo = F, message = F, results = "asis", error=F}
betalogit1 <- betareg(vote.AfD ~ GDP.capita + unempl.rate + n.refugees, data = Data)
View(vote.AfD)
View(vote.AfD$Data)
View(Data$vote.AfD)
View("Data")
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
```
View(Data)
View(Data)
9.40*100
9.40/100
.094*100
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
<<<<<<< HEAD
percent((4) / 100)
```
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
Data <- transform(Data, new = vote.AfD / 100)
`
View(Data)
View("Data")
View("Data")
View("Data")
load("Data.Rda") # Load data file
Data <- transform(Data, new = vote.AfD / 100)
View("Data")
---
title: "What Explains the Electoral Success of the AfD?"
author: "Md Mujahedul Islam & Johannes Schulz-Knappe"
date: |
| May 2, 2016
| Hertie School of Governance
output:
pdf_document: default
fonttheme: structuresmallcapsserif
html_document: null
colortheme: beaver
slide_level: 2
theme: Warsaw
header-includes: \widowpenalties 1 150
subtitle: An Analysis of the March 2016 State Elections in Germany
bibliography:
- Library.bib
- Packages1.bib
- Packages2.bib
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```
``` {r initialisation, echo = F, message = F, warning = F}
#options(repos=c(CRAN="http://mirrors.softliste.de/cran/"))
=======
rm(list = ls())
>>>>>>> origin/master
rm(list = ls())
load <- c("repmis", "magrittr", "scales", "betareg", "dplyr", "xtable", "texreg",
"stargazer", "readxl", "ggplot2", "grid",
"captioner", "foreign", "rms", "Zelig",
"knitr", "GGally", "gridExtra",
"zoo", "rugarch")
loaded <- lapply(load, function(x) {
if(!require(x, character.only = T)) {
install.packages(x)
require(x, character.only = T)
}
})
rm(load, loaded)
figcap <- captioner(prefix = "Figure",
auto_space = TRUE, levels = 1, type = NULL)
tablecap <- captioner(prefix = "Table",
auto_space = TRUE, levels = 1, type = NULL)
# Set the working directory:
# Create list of commonly used working directories (update, if needed)
possible_dir <- c('C:/Users/Johannes SK/Dropbox/Studium/Spring2016/CollaborativeResearch/Final-Project',
'C:/Users/User/Documents/GitHub/Final-Project')
<<<<<<< HEAD
set_valid_wd(possible_dir) # Set to first valid directory in the possible_dir vector
rm(possible_dir) # remove possible_dir vector
#View(Data)
#write.csv(Data, file = "afd.csv")
#write.dta(Data, file = "afd.dta")
```
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
Data <- transform(Data, new = vote.AfD / 100)
View("Data")
```
## Introduction
- Within less than three years of being founded, the **Alternative for Germany** (AfD) has achieved extraordinary vote share in the General election of 2013 and the European Parliament election of 2014 [@arzheimer2015afd]
- March 2016: **15.1%** in Baden-Württemberg, **12.6%** in Rhineland-Palatinate, **24.3%** in Saxony-Anhalt
- "**a landslide**"[@Zeit2016]
- The AfD has **"arrived in German mainstream politics"** [@Spiegel2016]
## Existing Research
- AfD can be described as a "**functional equivalent for a right-wing populist party** in a country where right-wing politics are strongly stigmatised" [@Berbuir2015]
- Successful right-wing populist parties almost always use **anti-immigration rhethorics** [@Ivarsflaten2008]
- **Volume of refugees**, level of **immigration**, domestic **tax burden**, and strong presence of **left-wing parties** positively influences right wing-populist electoral success [@swank2003globalization]
- AfD was especially successful in mobilizing former **non-voters** and the **unemployed** [@Spiegel2016]
## Research Question
*"What explains the recent electoral success of the AfD in the different districts of Baden-Württemberg, Rhineland-Palatinate, and Saxony-Anhalt?"*
- What structural factors correlate with the success?
- Are those the same characteristics found for other western European countries?
## Election Data
*Source: State Statistical Offices of @BWStateOffice, @RPStateOffice, and @SAStateOffice*
Variable | Name in dataset | Description |
--------------------|-----------------|-------------------------------|
Dependent Variable (DV) | **vote.AfD** | The vote share of the Alternative for Germany in the current state election |
Independent Variable 1 (IV1) | **lag.turnout** | Overall voter turnout of the previous state election                        |
IV2, IV3, IV4, IV5, IV6 | **lag.CDU**, **lag.Greens**, **lag.SPD**, **lag.FDP**, **lag.Linke** | The vote share of political parties in the previous state election (CDU, SPD, Greens, FDP, and Linke) |
## Structural Data
*Source: Federal Statistical Office [@DESTATIS]*
Variable | Name in dataset | Description |
--------------------|-----------------|-------------------------------|
IV7 | **abitur.ratio**| Ratio of school leavers per district with general qualification for university entrance (Abitur) |
IV8 | **nodegree.ratio** | Ratio of school leavers per district with no school degree |
IV9 | **GDP.capita** | Gross domestic product (GDP) per capita / 1000 |
IV10 | **unemp.rate** | Unemployment rate in the district |
IV11 | **n.refugees** | Number of asylum seekers per district |
## Descriptive Statistics
```{r sumstat, echo=F, warning=F, message=F, error=F, results='asis'}
summary_labels <- c('Vote share of AfD in 2016', 'Vote turnout in 2011',
'Vote share of CDU in 2011', 'Vote share of Greens in 2011',
'Vote share of SPD in 2011', 'Vote share of FDP in 2011',
'Vote share of Linke in 2011', 'High school ratio',
'No degree ratio', 'GDP per capita / 1000',
'Unemployment rate', 'Number of refugees')
stargazer(Data[4:16],
covariate.labels = summary_labels,
font.size = 'tiny',
title= 'Summary statistics of the covariates',
type="latex", header = FALSE)
```
## Correlation Matrix
```{r corr, echo=F, warning=F, message=F, error=F, results='asis'}
correlation.matrix <- cor(Data[, c("vote.AfD","lag.CDU",
"lag.SPD","GDP.capita",
"unempl.rate",
"abitur.ratio")])
stargazer(correlation.matrix,
title= 'Correlation matrix of some variables',
font.size = 'tiny',
digits = 2,
type="latex",
header = FALSE,
no.space = FALSE)
```
## Distribution of AfD Vote Share
```{r bar, echo=F, warning=F, message=F, error=F, results='hide', fig.width=13}
ggplot(Data) +
geom_bar(aes(y = vote.AfD,
x = reorder(district.name, -vote.AfD),
fill = state),
stat = "identity") +
ylab("AfD vote share (in %)") +
xlab("Districts of Baden-Württemberg, Rhineland-Palatinate, and Saxony Anhalt") +
theme_bw() +
theme(axis.text.x = element_text(angle = 90))
```
## The Correlation of GDP per Capita and AfD Vote Share
``` {r fig1, echo = F, message = F, results = "hide", error=F, fig.height=4}
ggplot2::ggplot(Data, aes(log(x = GDP.capita), vote.AfD)) +
xlab("GDP per capita per district / 1000 (log)") +
ylab("AfD vote share (in %)") +
geom_point(aes(colour = state)) +
geom_smooth() +
theme_bw()
```
## The Correlation of Unemployment and AfD Vote Share
``` {r fig2, echo = F, message = F, results = "hide", error=F, fig.height=4}
ggplot2::ggplot(Data, aes(log(x = unempl.rate), vote.AfD, colour = state)) +
xlab("Unemployment rate per district (log)") +
ylab("AfD vote share (in %)") +
geom_point(aes(colour = state)) +
geom_smooth() +
theme_bw()
```
## The Correlation of Number of Refugees and AfD Vote Share
``` {r fig3, echo = F, message = F, results = "hide", error=F, fig.height=4}
ggplot2::ggplot(Data,aes(log(x = n.refugees), vote.AfD)) +
xlab("Number of refugees per district (log)") +
ylab("AfD vote share (in %)") +
geom_point(aes(colour = state)) +
geom_smooth() +
theme_light()
```
## Inferential Statistics: normal multivariate regression analsys
``` {r regout, echo = F, message = F, results = "asis", error=F}
reg1 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees, data = Data)
reg2 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees + lag.CDU +
lag.SPD + lag.turnout, data = Data)
reg3 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees +
abitur.ratio + nodegree.ratio, data = Data)
reg4 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees
+ lag.CDU + lag.SPD + lag.turnout + abitur.ratio +
nodegree.ratio, data = Data)
reg5 <- lm(vote.AfD ~ GDP.capita + unempl.rate + n.refugees
+ lag.CDU + lag.SPD + lag.turnout + abitur.ratio +
nodegree.ratio + state, data = Data)
var_labels <- c('GDP per capita / 1000', 'Unemployment rate', 'Number of refugees',
'Vote share of CDU in 2011 election',
'Vote share of SPD in 2011 election',
'Voter turnout in 2011 election',
'Abitur ratio', 'No degree ratio', 'state')
stargazer::stargazer(reg1, reg2, reg3, reg4, reg5,
omit = 'as.factor*',
omit.stat = c('f', 'ser'), # to nicely fits on the page
out.header = F,
title = 'Determinants of electoral success for the Alternative for Germany',
dep.var.labels = 'Vote share of AfD',
covariate.labels = var_labels,
label = 'AfD_voteshare',
add.lines = list(c('District FE', rep('NO', 5))),
font.size = 'tiny', # make the font tiny
float = F, df = F, # add float and df to F
type="latex", header = F,
no.space = T,
digits = 2) # add no.space=TRUE to remove space in betwen line.
```
## Inferential Statistics: Beta regression analysis
``` {r betareganalysis, echo = F, message = F, results = "asis", error=F}
betalogit1 <- betareg(vote.AfD ~ GDP.capita + unempl.rate + n.refugees, data = Data)
betalogit2 <- betareg(vote.AfD ~ GDP.capita + unempl.rate + n.refugees + lag.CDU +
lag.SPD + lag.turnout, data = Data)
betalogit3 <- betareg(vote.AfD ~ GDP.capita + unempl.rate + n.refugees +
abitur.ratio + nodegree.ratio, data = Data)
betalogit4 <- betareg(vote.AfD ~ GDP.capita + unempl.rate + n.refugees
+ lag.CDU + lag.SPD + lag.turnout + abitur.ratio +
nodegree.ratio, data = Data)
betalogit5 <- betareg(vote.AfD ~ GDP.capita + unempl.rate + n.refugees
+ lag.CDU + lag.SPD + lag.turnout + abitur.ratio +
nodegree.ratio + state, data = Data)
var_labels <- c('GDP per capita / 1000', 'Unemployment rate', 'Number of refugees',
'Vote share of CDU in 2011 election',
'Vote share of SPD in 2011 election',
'Voter turnout in 2011 election',
'Abitur ratio', 'No degree ratio', 'state')
stargazer::stargazer(betalogit1, betalogit2, betalogit3, betalogit4, betalogit5,
omit = 'as.factor*',
omit.stat = c('f', 'ser'), # to nicely fits on the page
out.header = F,
title = 'Beta logit regression showing determinants of electoral success for the Alternative for Germany',
dep.var.labels = 'Vote share of AfD',
covariate.labels = var_labels,
label = 'AfD_voteshare',
add.lines = list(c('District FE', rep('NO', 5))),
font.size = 'tiny', # make the font tiny
float = F, df = F, # add float and df to F
type="latex", header = F,
no.space = T,
digits = 2) # add no.space=TRUE to remove space in betwen line.
```
View("Data")
## Limitations and Future Research
- Extend analysis on all state elections in Germany where the AfD has participated in order to increase observations
- Access more recent data on refugee numbers
- Include additional variables, like "immigration"
- Create interaction models
- Use beta regression as dependent variable is [0, 1] bounded
## Q&A
**Thank you for your attention!**
## References {.allowframebreaks}
View(Data)
Data1=(Data[,4]/(100))
View(Data1)
Data=(Data[,4]/(100))
View(Data)
View(Data)
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
View(Data)
newvariable <- (Data[,4]/(100))
View(newvariable)
Data$see <- newvariable
View(Data)
data[c(0:3,17,5:16,4)]
Data[c(0:3,17,5:16,4)]
Data <-[c(0:3,17,5:16,4)]
Data <- [c(0:3,17,5:16,4)]
Data <- c(0:3,17,5:16,4)
table <- data.frame(Data[c(0:3,17,5:16,4)])
View(table)
table <- data.frame(Data[c(0:3,17,5:16,4)])
View(table)
Data[,c(0:3,17,5:16,4)]
Data[c(0:3,17,5:16,4)])
Data[c(0:3,17,5:16,4)]
Data[c(, 0:3,17,5:16,4)]
Data[c(0:3,17,5:16,4)]
Data[c(0:3,17,5:16,4)]
View(Data)
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
View(Data)
newvariable <- (Data[,4]/(100))
Data$see <- newvariable
Data$see <- newvariable
Data[c(0:3,17,5:16,4)]
View(Data)
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
View(Data)
newvariable <- (Data[,4]/(100))
Data$vote.AfD% <- newvariable
Data[c(0:3,17,5:16,4)]
View(Data)
```
Data[c(0:3,17,5:16,4)]
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
View(Data)
newvariable <- (Data[,4]/(100))
Data$vote.AfD% <- newvariable
Data[c(0:3,17,5:16,4)]
View(Data)
```
```{r data, echo=F, warning=F, message=F, error=F}
load("Data.Rda") # Load data file
View(Data)
newvariable <- (Data[,4]/(100))
Data$vote.AfD% <- newvariable
Data$vote.AfD.prcnt <- newvariable
Data[c(0:3,17,5:16,4)]
View(Data)
reod <- Data[c(0:3,17,5:16,4)]
Data <- reod
View(Data)
summary(betalogit1)
``` {r betareganalysis, echo = F, message = F, results = "asis", error=F}
betalogit1 <- betareg(vote.AfD.prcnt ~ GDP.capita + unempl.rate + n.refugees, data = Data)
summary(betalogit1)
``` {r betareganalysis, echo = F, message = F, results = "asis", error=F}
data("Data", package = "betareg")
``` {r betareganalysis, echo = F, message = F, results = "asis", error=F}
data("Data", package = "betareg")
?betareg
``` {r betareganalyis, echo = F, message = F, results = "asis", error=F}
betalogit <- betareg(vote.AfD.prcnt ~ unempl.rate, data = Data)
betaloglog <- betareg(vote.AfD.prcnt ~ unempl.rate, data = Data, link = "loglog")
library(ggplot2)
ggplot(Data, aes(x = unempl.rate, y = vote.AfD.prcnt)) +
geom_point(size = 4, aes(fill = batch), shape = 21) +
scale_fill_grey() +
geom_line(aes(y = predict(betaloglog, Data),
colour = "log-log", linetype = "log-log")) +
geom_line(aes(y = predict(betalogit, Data),
colour = "logit", linetype = "logit")) +
scale_colour_manual("", values = c("red", "blue")) +
scale_linetype_manual("", values = c("solid", "dashed")) +
theme_bw()
```
``` {r betareganalyis, echo = F, message = F, results = "asis", error=F}
betalogit <- betareg(vote.AfD.prcnt ~ unempl.rate, data = Data)
betaloglog <- betareg(vote.AfD.prcnt ~ unempl.rate, data = Data, link = "loglog")
library(ggplot2)
ggplot(Data, aes(x = unempl.rate, y = vote.AfD.prcnt)) +
geom_point(size = 4, shape = 21) +
scale_fill_grey() +
geom_line(aes(y = predict(betaloglog, Data),
colour = "log-log", linetype = "log-log")) +
geom_line(aes(y = predict(betalogit, Data),
colour = "logit", linetype = "logit")) +
scale_colour_manual("", values = c("red", "blue")) +
scale_linetype_manual("", values = c("solid", "dashed")) +
theme_bw()
```
=======
# Set to first valid directory in the possible_dir vector
set_valid_wd(possible_dir)
# remove possible_dir vector
rm(possible_dir)
## 1.4 Create bibTeX file for the used packages
LoadandCite(packages, file = 'Packages1.bib')
rm(packages)
#-----------------------------------
source("data_gathering/election_data_gathering.R")
rm(list = ls())
source("data_gathering/structural_data_gathering.R")
# Delete unnecessary columns
size <- size_raw[, c(2, 4)]
# Rename columns
names(size) <- c("ID", "district.size")
# Convert ID to numeric
size$ID <- as.numeric(as.character(size$ID))
# Remove raw data from environment
rm(size_raw)
# Delete unnecessary columns
edu <- edu_raw[, c(2, 4, 6, 14)]
# Rename columns
names(edu) <- c("ID", "school.leaver", "nodegree", "abitur")
# Convert ID to numeric
edu$ID <- as.numeric(as.character(edu$ID))
# Create nodegree.ratio
edu$nodegree.ratio <- edu$nodegree/edu$school.leaver*100
# Create abitur.ratio
edu$abitur.ratio <- edu$abitur/edu$school.leaver*100
# Delete used columns
edu$nodegree      <- NULL
edu$abitur        <- NULL
edu$school.leaver <- NULL
# Remove raw data from environment
rm(edu_raw)
View(size)
View(edu)
View(unemp_raw)
unemp <- unemp_raw[, c(2, 12)]
# Delete unnecessary rows
unemp <- unemp[-c(1:9), ]
# Rename columns
names(unemp) <- c("ID", "unempl.rate")
rm(unemp_raw)
View(unemp)
unemp$ID <- as.numeric(as.character(unemp$ID))  # convert ID to numeric
unemp$unempl.rate <- as.character(unemp$unempl.rate)  # convert unempl.rate to character
unemp$unempl.rate <- gsub(",", ".", x = unemp$unempl.rate)  # replace commas with periods
unemp$unempl.rate <- as.numeric(unemp$unempl.rate)  # convert unempl.rate to numeric
View(gdp_raw)
gdp <- gdp_raw[, c(2, 6)]
# Rename columns
names(gdp) <- c("ID", "GDP.capita")
rm(gdp_raw)
View(gdp)
gdp_raw <- read.csv("data_raw/426-71-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-", ".", "..."),
skip = 9,
nrows = 525)
gdp <- gdp_raw[, c(2, 6)]
# Rename columns
names(gdp) <- c("ID", "GDP.capita")
rm(gdp_raw)
gdp$ID <- as.numeric(as.character(gdp$ID))  # Convert ID to numeric
View(edu)
View(size)
View(unemp)
#######################################################################
# MPP-E1180: Introduction to Collaborative Social Science Data Analysis
# Collaborative Research Project
# Structural Data Gathering
# Johannes Schulz-Knappe
# Update 15 May 2016
# Hertie School of Governance
#######################################################################
#-----------------------------------------#
# 1. Prepare the workspace                #
#-----------------------------------------#
# Run "1_Data.R" for workspace preparation
#-----------------------------------------#
# 2. Retrieve structura data              #
#-----------------------------------------#
# The data on structural characteristics of the districts is manually
# retrieved from https://www.regionalstatistik.de/genesis/online, as the
# Federal Statistical Office does not provide an API.
# We use the data files 171-01-4 (District Size), 192-71-4 (Education), 659-71-4 (Unemployment),
# 426-71-4 (GDP per Capita), 335-31-4 (Number of Asylum Seekers), and 358-61-4 (Public Debt).
# The downloaded csv files are stored under '/data_raw' in the working directory
## 2.1 District size
# Table 171-01-4, downloaded on 13/5/2016, selected time = 2014
size_raw <- read.csv("data_raw/171-01-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
col.names = c("date", "district.ID", "district.name",
"space"),
skip = 7,
nrows = 524,
dec=",")
## 2.2 Education
# Table 192-71-4, downloaded on 13/5
edu_raw <- read.csv("data_raw/192-71-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
skip = 11,
nrows = 524,
dec=",")
## 2.3 Unemployment rate
# Table 659-71-4, downloaded 13/5/2016, selected time = 2014
# Import the csv file
unemp_raw <- read.csv("data_raw/659-71-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
nrows = 533,
dec = ",")
## 2.4 GDP per capita
# Table 426-71-4, downloaded 13/5/2016, selected time = 2013
# Import the csv file
gdp_raw <- read.csv("data_raw/426-71-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-", ".", "..."),
skip = 10,
nrows = 524)
## 2.5 Number of asylum seekers
# Table 335-31-4, downloaded 13/5/2016, selected time = 2013
# Import the csv file
refugee_raw <- read.csv("data_raw/335-31-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
skip = 8,
nrows = 525,
dec = ",")
## 2.6 District public debt
# Table 358-61-4, downloaded 13/5/2016, selected time = 2009
# Import the csv file
debt_raw <- read.csv("data_raw/358-61-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
col.names = c("date", "district.ID", "district.name",
"public.debt", "public.loan.debt", "indep.inst.debt",
"local.hospital.debt"),
skip = 6,
nrows = 525,
dec = ",")
#-----------------------------------------#
# 1. Prepare the workspace                #
#-----------------------------------------#
# Run "1_Data.R" for workspace preparation
#-----------------------------------------#
# 2. Cleaning structural data             #
#-----------------------------------------#
## 2.1 District size
# Delete unnecessary columns
size <- size_raw[, c(2, 4)]
# Rename columns
names(size) <- c("ID", "district.size")
# Convert ID to numeric
size$ID <- as.numeric(as.character(size$ID))
# Remove raw data from environment
rm(size_raw)
## 2.2 Education
# Delete unnecessary columns
edu <- edu_raw[, c(2, 4, 6, 14)]
# Rename columns
names(edu) <- c("ID", "school.leaver", "nodegree", "abitur")
# Convert ID to numeric
edu$ID <- as.numeric(as.character(edu$ID))
# Create nodegree.ratio
edu$nodegree.ratio <- edu$nodegree/edu$school.leaver*100
# Create abitur.ratio
edu$abitur.ratio <- edu$abitur/edu$school.leaver*100
# Delete used columns
edu$nodegree      <- NULL
edu$abitur        <- NULL
edu$school.leaver <- NULL
# Remove raw data from environment
rm(edu_raw)
## 2.3 Unemployment rate
# Keep necessary columns
unemp <- unemp_raw[, c(2, 12)]
# Delete unnecessary rows
unemp <- unemp[-c(1:9), ]
# Rename columns
names(unemp) <- c("ID", "unempl.rate")
# Convert variables
unemp$ID <- as.numeric(as.character(unemp$ID))  # convert ID to numeric
unemp$unempl.rate <- as.character(unemp$unempl.rate)  # convert unempl.rate to character
unemp$unempl.rate <- gsub(",", ".", x = unemp$unempl.rate)  # replace commas with periods
unemp$unempl.rate <- as.numeric(unemp$unempl.rate)  # convert unempl.rate to numeric
# Remove raw data from environment
rm(unemp_raw)
View(unemp)
View(size)
View(edu)
gdp <- gdp_raw[, c(2, 6)]
# Rename columns
names(gdp) <- c("ID", "GDP.capita")
View(gdp)
gdp$ID <- as.numeric(as.character(gdp$ID))  # Convert ID to numeric
gdp$GDP.capita <- as.character(gdp$GDP.capita)  # convert GDP.capita to character
gdp$GDP.capita <- gsub(",", ".", x = gdp$GDP.capita)  # replace commas with periods
gdp$GDP.capita <- as.numeric(gdp$GDP.capita)  # convert GDP.capita to numeric
gdp$GDP.capita <- gdp$GDP.capita/1000 # divide by thousand for better readability
rm(gdp_raw)
View(refugee_raw)
refugee <- refugee_raw[, c(2, 4)]
rm(refugee_raw)
names(refugee) <- c("ID", "n.refugees")
View(refugee)
refugee$ID <- as.numeric(as.character(refugee$ID))
refugee_raw <- read.csv("data_raw/335-31-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
skip = 9,
nrows = 524,
dec = ",")
# Import the csv file
debt_raw <- read.csv("data_raw/358-61-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
col.names = c("date", "district.ID", "district.name",
"public.debt", "public.loan.debt", "indep.inst.debt",
"local.hospital.debt"),
skip = 7,
nrows = 524,
dec = ",")
refugee <- refugee_raw[, c(2, 4)]
# Rename columns
names(refugee) <- c("ID", "n.refugees")
# Convert ID to numeric
refugee$ID <- as.numeric(as.character(refugee$ID))
# Remove raw data from environment
rm(refugee_raw)
refugee$ID <- as.numeric(as.character(refugee$ID))
refugee_raw <- read.csv("data_raw/335-31-4.csv",
header = FALSE,
sep = ";",
na.strings = c("-","."),
skip = 9,
nrows = 524,
dec = ",")
View(refugee_raw)
refugee <- refugee_raw[, c(2, 4)]
names(refugee) <- c("ID", "n.refugees")
rm(refugee_raw)
View(debt_raw)
debt <- debt_raw[, c(2, 4)]
# Rename columns
names(debt) <- c("ID", "public.debt")
View(debt)
rm(debt_raw)
>>>>>>> origin/master
